{"name":"keepalive","enabled":true,"description":"Override timeout and maintain solid connection.","type":"group","id":1,"items":[{"type":"function","name":"Read_Me","enabled":true,"id":4,"code":"/*\n\nKeepalive v1.0.0\nby Zahan of Achaea\n\n\n!!!!! WARNING !!!!!\nThis mod cancels your timeout, by sending the gmcp.keepalive request every 15 seconds.\n\n\nUse the alias KEEPALIVE for status and commands.\n\n\nQ: Why use this instead of setting timeout to never?  \nA: Sending a constant keepalive maintains a solid connection so you won't lag out or disconnect!  It also allows you to set a really low timeout (3 minutes for example) so that if your client ever stops responding (and therefore may not fire antitheft triggers anymore), you will disconnect very soon after.\n\n*/"},{"type":"function","name":"onLoad","enabled":true,"id":2,"code":"if (typeof keepalive == \"undefined\") {keepalive = {};}\n\nfunction keepalive_gmcp () {client.send_GMCP(\"Core.KeepAlive\");}\n\nif (!keepalive.timer) {\n    client.display_notice(\"Keepalive activated!\", \"red\");\n    keepalive.timer = setInterval(keepalive_gmcp, 15000);\n}","items":[]},{"type":"alias","name":"keepalive(| off| on)","enabled":true,"id":3,"matching":"regexp","whole_words":false,"case_sensitive":false,"prefix_suffix":true,"actions":[{"action":"script","script":"var suffix = args[1];\nsuffix = suffix.replace(/\\s+/, \"\").toLowerCase();\n\nif (keepalive.timer) {\n    keepalive.status = \"on\";\n}\nelse {\n    keepalive.status = \"off\";\n}\n\nif (suffix == \"\") {\n    client.print(\"Keepalive is currently: \"+keepalive.status+\".\");\n    client.print(\"Syntax:\");\n    client.print(\"  KEEPALIVE OFF\");\n    client.print(\"  KEEPALIVE ON\");\n    client.print(\" \");\n}\nelse if (suffix == \"off\") {\n    if (keepalive.timer) {\n        clearInterval(keepalive.timer);\n        delete keepalive.timer;\n        client.display_notice(\"Keepalive deactivated.\");\n    }\n    else {\n        client.display_notice(\"Keepalive is already deactivated.\");\n    }\n}\nelse if (suffix == \"on\") {\n    if (!keepalive.timer) {\n        keepalive_gmcp = function () {client.send_GMCP(\"Core.KeepAlive\");};\n        keepalive.timer = setInterval(keepalive_gmcp, 15000);\n        client.display_notice(\"Keepalive activated.\");\n    }\n    else {\n        client.display_notice(\"Keepalive is already activated.\");\n    }\n}"}],"text":"^keepalive(|\\s+on|\\s+off|\\s+)$"}]}